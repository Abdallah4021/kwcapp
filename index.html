<!DOCTYPE html>
<html lang="en" id="htmlRoot">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KWC App</title>
    <style>
        :root {
            --primary-color: #F98125;
            --secondary-color: #2C599D;
            --font-family: Arial, sans-serif;
        }
        body {
            margin: 0;
            font-family: var(--font-family);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            min-height: 100vh;
            background-color: #f5f5f5;
            color: #333;
            padding: 20px;
            transition: direction 0.3s;
        }
        header {
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
        }
        #languageToggle {
            margin: 0 10px;
        }
        #languageToggle button {
            background: none;
            border: 1px solid var(--secondary-color);
            color: var(--secondary-color);
            padding: 5px 10px;
            margin-left: 5px;
            cursor: pointer;
            border-radius: 4px;
            transition: background-color 0.3s, color 0.3s;
        }
        #languageToggle button.active {
            background-color: var(--secondary-color);
            color: #fff;
        }
        #logo {
            max-width: 200px;
            height: auto;
        }
        main {
            max-width: 600px;
            width: 100%;
            text-align: center;
        }
        #titleLogo {
            max-width: 200px;
            height: auto;
            margin-bottom: 20px;
        }
        p.description {
            font-size: 1.1em;
            margin-bottom: 20px;
            color: #555;
        }
        #slogan {
            max-width: 100%;
            height: auto;
            margin-bottom: 20px;
        }
        #app-icon {
            width: 100px;
            height: 100px;
            object-fit: contain;
            border-radius: 20px;
            margin-bottom: 20px;
        }
        #googlePlayBadge {
            max-width: 200px;
            height: auto;
            margin-top: 10px;
        }
        footer {
            margin-top: auto;
            padding: 20px 0;
            color: #777;
            font-size: 0.9em;
        }

        /* Support floating button + modal */
        .support-btn {
            position: fixed;
            right: 20px;
            bottom: 20px;
            background: var(--secondary-color);
            color: #fff;
            border: none;
            padding: 12px 14px;
            border-radius: 28px;
            box-shadow: 0 6px 18px rgba(0,0,0,0.12);
            cursor: pointer;
            z-index: 1200;
            font-weight: bold;
        }
        .support-modal-backdrop {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.45);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1300;
        }
        .support-modal {
            background: #fff;
            width: 96%;
            max-width: 520px;
            border-radius: 10px;
            padding: 18px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        .support-modal h2 { margin-top: 0; color: var(--primary-color); }
        .support-modal label { display:block; margin-top:10px; font-weight:600; }
        .support-modal input[type="text"],
        .support-modal input[type="email"],
        .support-modal textarea {
            width: 100%;
            padding: 8px;
            border-radius: 6px;
            border: 1px solid #ddd;
            margin-top: 6px;
            font-family: inherit;
        }
        .support-modal textarea { min-height: 120px; resize: vertical; }
        .support-actions {
            display:flex;
            gap:8px;
            justify-content: flex-end;
            margin-top:12px;
        }
        .btn {
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            border: none;
        }
        .btn-primary { background: var(--secondary-color); color:#fff; }
        .btn-ghost { background: transparent; border: 1px solid #ccc; }

        .support-footer-note { font-size: 0.85em; color:#666; margin-top:8px; }

        @media (max-width: 600px) {
            .support-modal { padding: 14px; }
            .support-btn { right: 12px; bottom: 12px; }
        }
    </style>
</head>
<body>
    <header>
        <img id="logo" src="logo_gradent.png" alt="KWC Logo">
        <div style="display:flex; align-items:center;">
            <a href="support.html" id="supportLink" style="margin-right:12px; color:var(--secondary-color); text-decoration:none; font-weight:600;">
                Support
            </a>
            <div id="languageToggle">
                <button id="btn-en" class="active">EN</button>
                <button id="btn-ar">ع</button>
            </div>
        </div>
    </header>

    <main>
        <img id="titleLogo" src="logo_gradent.png" alt="KWC Logo">

        <img id="slogan" src="slogen_color.png" alt="Slogan">

        <p class="description" id="description">
            KWC App is designed to help you track your wellness and health. Explore features, tips, and insights to improve your daily routine and well-being.
        </p>

        <img id="app-icon" src="app-icon.png" alt="App Icon" onerror="this.style.display='none'">

        <div>
            <a id="playStoreLink" href="https://play.google.com/store/apps/details?id=com.health.kwc" target="_blank">
                <img id="googlePlayBadge"
                     src="https://play.google.com/intl/en_us/badges/images/generic/en_badge_web_generic.png"
                     alt="Get it on Google Play">
            </a>
        </div>
    </main>

    <footer id="footer">
        © <span id="year"></span> KWC App. All rights reserved.
    </footer>

    <!-- Floating Support button -->
    <button class="support-btn" id="openSupportBtn">Support</button>

    <!-- Modal -->
    <div class="support-modal-backdrop" id="supportBackdrop" role="dialog" aria-hidden="true">
        <div class="support-modal" role="document" aria-labelledby="supportTitle">
            <h2 id="supportTitle">Contact Support</h2>

            <div id="supportFormContainer">
                <label for="supportName">Name</label>
                <input id="supportName" type="text" placeholder="Your name">

                <label for="supportEmail">Email</label>
                <input id="supportEmail" type="email" placeholder="you@example.com">

                <label for="supportSubject">Subject</label>
                <input id="supportSubject" type="text" placeholder="Short summary">

                <label for="supportMessage">Message</label>
                <textarea id="supportMessage" placeholder="Describe your issue or question"></textarea>

                <label style="margin-top:8px;">
                    <input type="checkbox" id="includeSys"> Include system info (user agent, page)
                </label>

                <div class="support-footer-note" id="supportNote">
                    If you prefer, open our GitHub issues page or send an email to <strong>support@kwcapp.com</strong>.
                </div>

                <div class="support-actions">
                    <button class="btn btn-ghost" id="closeSupport">Cancel</button>
                    <button class="btn btn-primary" id="sendSupport">Send</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const content = {
            en: {
                description: "KWC App is designed to help you track your wellness and health. Explore features, tips, and insights to improve your daily routine and well-being.",
                playLink: "https://play.google.com/store/apps/details?id=com.health.kwc",
                support: {
                    title: "Contact Support",
                    note: "If you prefer, open our GitHub issues page or send an email to support@kwcapp.com."
                }
            },
            ar: {
                description: "تم تصميم تطبيق KWC لمساعدتك في تتبع صحتك وعافيتك. استكشف الميزات والنصائح والرؤى لتحسين روتينك اليومي ورفاهيتك.",
                playLink: "https://play.google.com/store/apps/details?id=com.health.kwc",
                support: {
                    title: "اتصل بالدعم",
                    note: "إذا رغبت، افتح صفحة القضايا على GitHub أو أرسل بريدًا إلى support@kwcapp.com."
                }
            }
        };

        const htmlRoot = document.getElementById('htmlRoot');
        const btnEn = document.getElementById('btn-en');
        const btnAr = document.getElementById('btn-ar');
        const descEl = document.getElementById('description');
        const playLinkEl = document.getElementById('playStoreLink');
        const yearEl = document.getElementById('year');

        const openSupportBtn = document.getElementById('openSupportBtn');
        const supportBackdrop = document.getElementById('supportBackdrop');
        const closeSupport = document.getElementById('closeSupport');
        const sendSupport = document.getElementById('sendSupport');
        const supportNote = document.getElementById('supportNote');

        function setLanguage(lang) {
            if (lang === 'en') {
                btnEn.classList.add('active');
                btnAr.classList.remove('active');
            } else {
                btnAr.classList.add('active');
                btnEn.classList.remove('active');
            }
            descEl.textContent = content[lang].description;
            playLinkEl.href = content[lang].playLink;
            supportNote.textContent = content[lang].support.note;

            if (lang === 'ar') {
                htmlRoot.setAttribute('lang', 'ar');
                document.body.setAttribute('dir', 'rtl');
                document.body.style.textAlign = 'right';
            } else {
                htmlRoot.setAttribute('lang', 'en');
                document.body.setAttribute('dir', 'ltr');
                document.body.style.textAlign = 'center';
            }
        }

        btnEn.addEventListener('click', () => setLanguage('en'));
        btnAr.addEventListener('click', () => setLanguage('ar'));

        // Support modal behavior
        openSupportBtn.addEventListener('click', () => {
            supportBackdrop.style.display = 'flex';
            supportBackdrop.setAttribute('aria-hidden', 'false');
        });
        closeSupport.addEventListener('click', () => {
            supportBackdrop.style.display = 'none';
            supportBackdrop.setAttribute('aria-hidden', 'true');
        });
        supportBackdrop.addEventListener('click', (e) => {
            if (e.target === supportBackdrop) {
                supportBackdrop.style.display = 'none';
                supportBackdrop.setAttribute('aria-hidden', 'true');
            }
        });

        // Send handler - uses mailto: and falls back to GitHub issues page
        sendSupport.addEventListener('click', () => {
            const name = document.getElementById('supportName').value.trim();
            const email = document.getElementById('supportEmail').value.trim();
            const subj = document.getElementById('supportSubject').value.trim() || 'KWC App Support';
            const msg = document.getElementById('supportMessage').value.trim();
            const includeSys = document.getElementById('includeSys').checked;

            if (!email || !msg) {
                alert('Please include your email and a message.');
                return;
            }

            const sys = includeSys ? (
                '\n\n---\nSystem info:\n' +
                `User Agent: ${navigator.userAgent}\n` +
                `Platform: ${navigator.platform}\n` +
                `Language: ${navigator.language}\n` +
                `Current page: ${location.href}\n`
            ) : '';

            const body = `Name: ${name}\nEmail: ${email}\n\nMessage:\n${msg}${sys}`;

            // Prefer mailto
            const supportEmail = 'support@kwcapp.com'; // update to your real support email
            const mailto = `mailto:${supportEmail}?subject=${encodeURIComponent(subj)}&body=${encodeURIComponent(body)}`;

            // Some browsers block long mailto; try it and if it fails, open GitHub issues page
            try {
                window.location.href = mailto;
                // close modal briefly
                supportBackdrop.style.display = 'none';
                supportBackdrop.setAttribute('aria-hidden', 'true');
            } catch (e) {
                // fallback: open GitHub issues page
                window.open('https://github.com/<YOUR-ORG-or-USER>/<YOUR-REPO>/issues/new', '_blank');
            }
        });

        // Initialize language & year
        setLanguage('en');
        yearEl.textContent = new Date().getFullYear();
    </script>
</body>
</html>
